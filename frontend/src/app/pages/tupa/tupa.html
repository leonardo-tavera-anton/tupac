<div class="tupa-container container-fluid mt-4">
  <div class="row mb-4">
    <div class="col-12">
      <div class="input-group shadow-sm">
        <span class="input-group-text bg-white border-end-0">ğŸ”</span>
        <input type="text" [(ngModel)]="filterText" class="form-control border-start-0" 
               placeholder="Busque un trÃ¡mite en el Ã¡rea seleccionada...">
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="list-group shadow-sm sticky-top" style="top: 20px;">
        <div class="list-group-item bg-dark text-white font-weight-bold">ğŸ“ Seleccione un Ãrea</div>
        <button 
          *ngFor="let area of areas" 
          (click)="seleccionarArea(area)"
          [class.active]="areaSeleccionada?.id === area.id"
          class="list-group-item list-group-item-action d-flex justify-content-between align-items-center"
        >
          {{ area.nombre }}
          <span class="badge badge-pill badge-primary">{{ area.tramites?.length }}</span>
        </button>
      </div>
    </div>

    <div class="col-md-8">
      <div *ngIf="areaSeleccionada; else noArea" class="area-content">
        <h2 class="mb-3 text-primary">{{ areaSeleccionada.nombre }}</h2>
        <hr>

        <div *ngIf="tramitesFiltrados.length > 0; else noResults">
          <div *ngFor="let tramite of tramitesFiltrados" class="card mb-3 shadow-sm border-0">
            <div class="card-header bg-white">
              <h5 class="mb-0 text-dark font-weight-bold">
                {{ tramite.nombre_tramite }}
              </h5>
            </div>
            <div class="card-body bg-light">
              <h6 class="text-secondary font-italic mb-3">EspecÃ­ficos / Tasas:</h6>
              <ul class="list-unstyled pl-3">
                <li *ngFor="let req of tramite.requisitos" class="mb-2 border-bottom pb-2">
                   <span class="text-success font-weight-bold">âœ“</span> {{ req.descripcion }}
                </li>
              </ul>
            </div>
          </div>
        </div>

        <ng-template #noResults>
          <div class="alert alert-warning">No se encontraron trÃ¡mites para "{{ filterText }}"</div>
        </ng-template>
      </div>

      <ng-template #noArea>
        <div class="text-center p-5 bg-white shadow-sm rounded">
          <h3 class="text-muted">Por favor, seleccione un Ã¡rea de la izquierda para ver los trÃ¡mites.</h3>
        </div>
      </ng-template>
    </div>
  </div>
</div>